<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>GSAP ScrollTrigger and Three.js Camera Movement</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: sans-serif;
      }
      .canvas-container {
        position: fixed;
        top: 0%;
        left: 0%;
        width: 100%;
        height: 100vh;
        z-index: 1;
      }
      .page {
        position: relative;
        z-index: 2;
      }
      .page2 {
        position: relative;
        z-index: 2;
        height: 100vh;
        width: 100%;
        background: #000;
      }
      .section {
        width: 100%;
        height: 100vh;
        color: white;
      }
      .section-six {
        background-color: white;
      }
    </style>
  </head>
  <body>
    <div class="canvas-container"></div>
    <div class="page">
      <div class="section section-one"><h1></h1></div>
      <div class="section section-two"></div>
      <div class="section section-three"></div>
      <div class="section section-four"><h1></h1></div>
      <div class="section section-five"><h1></h1></div>
      <!-- <div class="section section-six">
        <h1>Section Six</h1>
      </div> -->
    </div>
    <div class="page2">
      <h1 class="intro-title" style="color: white">
        The New Bajaj Pulsar N160
      </h1>
      <video
        id="desktopVideo"
        src="/videos/bike-video2.mp4"
        preload="auto"
      ></video>
    </div>
    <section class="image-gallery">
      <div class="title">
        <h1>The New Bajaj Pulsar N160</h1>
      </div>
      <div class="gallery-container">
        <div class="card1">
          <img class="bikeimg" src="images/bikeJPG.jpg" alt="Bike" />
          <table>
            <tbody class="table--body">
              <tr>
                <td class="td">Format</td>
                <td class="colon">:</td>
                <td class="data">JPG</td>
              </tr>
              <tr>
                <td class="td">Size</td>
                <td class="colon">:</td>
                <td class="data">637 KB</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="card2">
          <img class="bikeimg" src="images/bikePNG.png" alt="Bike" />
          <table>
            <tbody class="table--body">
              <tr>
                <td class="td">Format</td>
                <td class="colon">:</td>
                <td class="data">PNG</td>
              </tr>
              <tr>
                <td class="td">Size</td>
                <td class="colon">:</td>
                <td class="data">2287 KB</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="card3">
          <img class="bikeimg" src="images/bikeWEBP.webp" alt="Bike" />
          <table>
            <tbody class="table--body">
              <tr>
                <td class="td">Format</td>
                <td class="colon">:</td>
                <td class="data">WEBP</td>
              </tr>
              <tr>
                <td class="td">Size</td>
                <td class="colon">:</td>
                <td class="data">1060 KB</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
    <!-- <div class="intro">
      <h1>The New Bajaj Pulsar N160</h1>
      <video
        id="desktopVideo"
        src="/motorbikeCinematic.mp4"
        preload="auto"
      ></video>
      <video id="mobileVideo" src="/mobile-video.mp4"></video>
    </div> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/110/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/three@0.146.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://unpkg.com/three@0.157.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.146.0/examples/js/loaders/GLTFLoader.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"
      integrity="sha256-2p2tRZlPowp3P/04Pw2rqVCSbhyV/IB7ZEVUglrDS/c="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.gsap.js"
      integrity="sha256-peenofh8a9TIqKdPKIeQE7mJvuwh+J0To7nslvpj1jI="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.js"
      integrity="sha256-31FC/OT6XpfjAhj9FuXjw5/wPXXawCAjJQ29E23/XPk="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"
      integrity="sha256-lPE3wjN2a7ABWHbGz7+MKBJaykyzqCbU96BJWjio86U="
      crossorigin="anonymous"
    ></script>
    <script>
      // Set up Three.js scene and camera
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      camera.lookAt(0, 0, 0);
      camera.position.z = 5;
      // camera.position.y = 2;

      const renderer = new THREE.WebGLRenderer();
      renderer.setSize(window.innerWidth, window.innerHeight);
      const container = document.querySelector(".canvas-container");
      container.appendChild(renderer.domElement);

      // Add lighting (optional)
      const light = new THREE.PointLight(0xffffff);
      light.position.set(5, 5, 5);
      scene.add(light);

      //Ambient Light
      const ambientLight = new THREE.AmbientLight(0xffffff, 2); // Color can be adjusted (hex format)
      scene.add(ambientLight);

      //Directional Light
      const directionalLight = new THREE.DirectionalLight(0xffffff, 3); // Color and intensity
      directionalLight.position.set(1, 1, 1); // Set the light's direction
      scene.add(directionalLight);

      let model;

      const adjustModelScale = () => {
        console.log("resize");
        const width = window.innerWidth;
        console.log(width);
        if (width <= 768) {
          console.log("inside");
          // Adjust the model scale for mobile devices
          model.scale.set(1, 1, 1); // Adjust the scale as needed
        } else {
          // Use a different scale for larger screens
          model.scale.set(4, 4, 4); // Adjust the scale as needed
        }
      };

      // GLTF Loader
      const gltfLoader = new THREE.GLTFLoader();
      // gltfLoader.setDRACOLoader(dracoLoader);
      gltfLoader.load("assets/bajaj.glb", (gltf) => {
        // Add the loaded model to the scene here if needed
        model = gltf.scene;
        adjustModelScale();

        model.position.y = -2;
        model.rotation.y = 1.48;
        // model.rotation.y = 0.6;
        model.scale.set(4, 4, 4);
        scene.add(model);
      });

      const t1 = gsap.timeline({
        scrollTrigger: {
          trigger: ".section-one",
          start: "50% 50%",
          end: "bottom 50%",
          markers: true,
          scrub: 0.5,
          duration: 10,
        },
      });

      t1.to(camera.position, {
        z: 1.8,
        y: 0.8,
        x: 3.5,
        duration: 10,
        scrub: 0.5,
      }).to(camera.rotation, { y: 0.2 });

      const t2 = gsap.timeline({
        scrollTrigger: {
          trigger: ".section-two",
          start: "50% 50%",
          end: "bottom 50%",
          markers: true,
          scrub: 0.5,
          duration: 10,
        },
      });

      t2.to(camera.position, {
        z: 1.6,
        y: -1,
        x: 3,
        duration: 8,
        scrub: 0.5,
      }).to(camera.rotation, { y: 0 });

      const t3 = gsap.timeline({
        scrollTrigger: {
          trigger: ".section-three",
          start: "50% 50%",
          end: "bottom 50%",
          markers: true,
          scrub: 0.5,
          duration: 10,
        },
      });

      t3.to(camera.position, {
        z: 1.3,
        y: -0.6,
        x: 0,
        duration: 8,
        scrub: 0.5,
      }).to(camera.rotation, { y: 0 });

      const t4 = gsap.timeline({
        scrollTrigger: {
          trigger: ".section-four",
          start: "50% 50%",
          end: "bottom 50%",
          markers: true,
          scrub: 0.5,
          duration: 10,
        },
      });

      t4.to(camera.position, {
        z: 1.1,
        y: -0.85,
        x: -2.8,
        duration: 8,
        scrub: 0.5,
      }).to(camera.rotation, { y: 0 });

      function onWindowResize() {
        const newWidth = window.innerWidth;
        const newHeight = window.innerHeight;

        camera.aspect = newWidth / newHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(newWidth, newHeight);
      }

      // Render the scene
      function animate() {
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
      }

      animate();

      // Handle window resize
      window.addEventListener("resize", onWindowResize);
    </script>
    <script src="/script.js"></script>
  </body>
</html>
